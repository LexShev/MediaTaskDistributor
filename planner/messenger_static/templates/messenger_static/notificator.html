{% extends  'messenger_static/index.html' %}
{% load static %}


{% block messenger %}

<div class="notificator-container rounded-bottom p-0">
    <h6 class="cur-chat-name text-center shadow p-2 mb-0">Уведомления</h6>
    <div class="notifications flex-grow-1 overflow-auto" id="notifications" style="height: 59rem">
        {% for notice in all_notifications %}
            <div class="d-flex">
                <div class="notice-item {% if not notice.is_read %}new-notice{% endif %}"
                     data-notice-id="{{ notice.notice_id }}">
                    <h6>{{ notice.sender|planner_worker_name }}</h6>
                    <div class="notice-text">
                        {% if notice.program_id %}
                            <a href="{% url 'home' %}{{ notice.program_id }}"
                               class="link-body-emphasis link-offset-3-hover link-underline link-underline-opacity-0 link-underline-opacity-75-hover">
                                <h6>{{ notice.program_id|program_name }}</h6>
                            </a>
                        {% endif %}
                        <p>
                            {{ notice.comment }}
                        </p>
                        {% if notice.message %}
                        <div class="ms-2">
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-quote" viewBox="0 0 16 16">
                              <path d="M12 12a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1h-1.388q0-.527.062-1.054.093-.558.31-.992t.559-.683q.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 9 7.558V11a1 1 0 0 0 1 1zm-6 0a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1H4.612q0-.527.062-1.054.094-.558.31-.992.217-.434.559-.683.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 3 7.558V11a1 1 0 0 0 1 1z"/>
                            </svg>
                            <small>{{ notice.message }}</small>
                            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-quote" viewBox="0 0 16 16">
                              <path d="M12 12a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1h-1.388q0-.527.062-1.054.093-.558.31-.992t.559-.683q.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 9 7.558V11a1 1 0 0 0 1 1zm-6 0a1 1 0 0 0 1-1V8.558a1 1 0 0 0-1-1H4.612q0-.527.062-1.054.094-.558.31-.992.217-.434.559-.683.34-.279.868-.279V3q-.868 0-1.52.372a3.3 3.3 0 0 0-1.085.992 4.9 4.9 0 0 0-.62 1.458A7.7 7.7 0 0 0 3 7.558V11a1 1 0 0 0 1 1z"/>
                            </svg>
                        </div>
                        {% endif %}
                    </div>
                    <small class="text-muted mt-2 d-block text-end">{{ notice.timestamp|date:"d.m.Y H:i:s" }}</small>
                </div>
            </div>
        {% endfor %}
    </div>
</div>
<script type="text/javascript" src="{% static 'js/notifications.js' %}"></script>
{% endblock %}
