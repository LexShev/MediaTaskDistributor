{% extends  'main/index.html' %}
{% load static %}
<main>
{% block body %}
<br>
<div class="container-xxl px-0">
  <div id="message_container">
    {% include  'main/messages.html' %}
  </div>
  {% if full_info.Progs_program_kind != 1 and full_info.Progs_program_kind != 4 %}
    <div class="accordion shadow mx-0 mb-2 mt-0 p-0" id="accordion_sum_info">
      <div class="accordion-item">
        <h6 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseDescription" aria-expanded="true" aria-controls="collapseDescription">
            Описание
          </button></h6>
      <div id="collapseDescription" class="accordion-collapse collapse show" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">

          <div class="row m-0 mb-2 gx-1 gy-2">
            <div class="col px-1 d-flex align-items-center" style="flex: 0 0 15%; max-width: 15%; height: 100%;">
              <img src="{% static 'img/no_poster.jpg' %}" id="movie_poster"
                   class="img-fluid rounded m-0 w-100 h-auto object-fit-cover"
                   data-fallback="{% static 'img/no_poster.jpg' %}" data-material-type="{{ full_info.material_type }}"
                   data-program-id="{{ full_info.Progs_program_id }}" data-parent-id="{{ full_info.Progs_parent_id }}"
                   data-name="{{ full_info.Progs_name }}" data-year="{{ full_info.Progs_production_year }}"
                   data-country="{{ full_info.Progs_production_country }}">
            </div>

            <div class="col px-1" style="flex: 0 0 85%; max-width: 85%;">
              <div class="row mb-2 mx-0 align-items-center">
                <div class="col">
                  <h6 class="{{ full_info.color }} text-end p-1 m-0">
                    {{ full_info.material_status }}
                    {% if full_info.Task_ready_date %}
                      {{ full_info.Task_ready_date|date:'d.m.Y' }}
                    {% else %}
                      {{ full_info.oplan3_work_date|date:'d.m.Y' }}
                    {% endif %}
                  </h6>
                </div>
              </div>
              <div class="row mb-2 mx-0 align-items-center">
                <div class="col-md-6 d-flex align-items-center">
                  {% if full_info.material_type == 'season' %}
                    <a class="link-body-emphasis link-offset-3-hover link-underline-opacity-0" href="{% url 'home' %}{{ full_info.Progs_parent_id }}">
                      <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-up" viewBox="0 0 16 16">
                        <path fill-rule="evenodd" d="M8 15a.5.5 0 0 0 .5-.5V2.707l3.146 3.147a.5.5 0 0 0 .708-.708l-4-4a.5.5 0 0 0-.708 0l-4 4a.5.5 0 1 0 .708.708L7.5 2.707V14.5a.5.5 0 0 0 .5.5z"/>
                      </svg>
                    </a>
                  {% endif %}
                  <h5 class="p-1 m-0" title="{{ full_info.Progs_orig_name }}" id="program_id" data-program-id="{{ full_info.Progs_program_id }}">
                    {{ full_info.Progs_name }}{% if full_info.Adult_Name %}. {{ full_info.Adult_Name }}{% endif %}
                  </h5>
                </div>
                <div class="col p-0">
                  <div class="row align-items-center text-end mx-1 p-0">
                    <div class="col ms-0 m-0 p-0">
                      <input type="text" class="form-control text-body-secondary bg-secondary-subtle border border-secondary-subtle" value="{{ full_info.Files_Name }}" id="file_path">
                    </div>
                    <div class="col col-1 m-0 p-0">
                      <button type="button" class="btn btn-outline-secondary text-body-secondary" onclick="CopyText()">
                          <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-clipboard" viewBox="0 0 16 16">
                            <path d="M4 1.5H3a2 2 0 0 0-2 2V14a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V3.5a2 2 0 0 0-2-2h-1v1h1a1 1 0 0 1 1 1V14a1 1 0 0 1-1 1H3a1 1 0 0 1-1-1V3.5a1 1 0 0 1 1-1h1z"/>
                            <path d="M9.5 1a.5.5 0 0 1 .5.5v1a.5.5 0 0 1-.5.5h-3a.5.5 0 0 1-.5-.5v-1a.5.5 0 0 1 .5-.5zm-3-1A1.5 1.5 0 0 0 5 1.5v1A1.5 1.5 0 0 0 6.5 4h3A1.5 1.5 0 0 0 11 2.5v-1A1.5 1.5 0 0 0 9.5 0z"/>
                          </svg>
                      </button>
                    </div>
                  </div>
                </div>
              </div>
              <div class="row g-2 ms-2 mx-0">
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="year_form" style="height: 50px" disabled>{{ full_info.Progs_production_year }}</textarea>
                    <label for="year_form">Год</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="country_form" style="height: 50px" disabled>{{ full_info.Progs_production_country }}</textarea>
                    <label for="country_form">Страна</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="director_form" style="height: 50px" disabled>{{ full_info.Progs_Director }}</textarea>
                    <label for="director_form">Режиссёр</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="roles_form" style="height: 50px" disabled>{{ full_info.Progs_Cast }}</textarea>
                    <label for="roles_form">В ролях</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="theme_form" style="height: 50px" disabled>{{ full_info.Progs_comment }}</textarea>
                    <label for="theme_form">Тематика</label>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="form-floating">
                    <textarea class="form-control" id="keywords_form" style="height: 50px" disabled>{{ full_info.Progs_keywords }}</textarea>
                    <label for="keywords_form">Ключевые слова</label>
                  </div>
                </div>
              </div>
            </div>



          </div>

          <div class="form-floating mx-1 my-2">
            <textarea class="form-control" id="short_descript_form" style="height: 100px">{{ custom_fields.5 }}</textarea>
            <label for="short_descript_form">Краткое описание</label>
          </div>
          <div class="form-floating mx-1 my-2">
            <textarea class="form-control" id="full_descript_form" style="height: 150px">{{ full_info.Progs_annotation }}</textarea>
            <label for="full_descript_form">Полное описание</label>
          </div>
        </div>
      </div>
      </div>
      <!--  </div>-->

      <!--  <div class="accordion shadow-lg ms-2 mb-2 mt-0 p-0" id="accordion_cenz">-->
      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseCenz" aria-expanded="false" aria-controls="collapseCenz">
          Цензура
        </button></h6>
      <div id="collapseCenz" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_cenz_buttons.html' %}
        </div>
      </div>
      </div>

      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseComments" aria-expanded="false" aria-controls="collapseComments">
          Комментарии
        </button></h6>
      <div id="collapseComments" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_comments.html' %}
        </div>
      </div>
      </div>

      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAirInfo" aria-expanded="false" aria-controls="collapseCenz">
          История эфиров
        </button></h6>
      <div id="collapseAirInfo" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_airinfo_table.html' %}
        </div>
      </div>
      </div>

      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseHistory" aria-expanded="false" aria-controls="collapseCenz">
          История изменений
        </button></h6>
      <div id="collapseHistory" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_history.html' %}
        </div>
      </div>
      </div>

      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFiles" aria-expanded="false" aria-controls="collapseCenz">
          История медиафайлов
        </button></h6>
      <div id="collapseFiles" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_filepath_history.html' %}
        </div>
      </div>
      </div>

      <div class="accordion-item">
      <h6 class="accordion-header">
        <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseMediaInfo" aria-expanded="false" aria-controls="collapseCenz">
          MediaInfo
        </button></h6>
      <div id="collapseMediaInfo" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
        <div class="accordion-body">
          {% include 'main/block_mediainfo_table.html' %}
        </div>
      </div>
      </div>

        <div class="accordion-item">
          <h6 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseScans" aria-expanded="false" aria-controls="collapseCenz">
              Авто сканеры
            </button></h6>
          <div id="collapseScans" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
            <div class="accordion-body">
              {% include 'main/block_scanners.html' %}
            </div>
          </div>
        </div>

        <div class="accordion-item">
          <h6 class="accordion-header">
            <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseAttachedFiles" aria-expanded="false" aria-controls="collapseCenz">
              Прикреплённые файлы
            </button></h6>
          <div id="collapseAttachedFiles" class="accordion-collapse collapse" data-bs-parent="#accordion_sum_info">
            <div class="accordion-body">
              {% include 'main/block_attached_files.html' %}
            </div>
          </div>
        </div>
    </div>
  <script type="text/javascript" src="{% static 'js/detail_view.js' %}"></script>
  {% else %}

    <div class="accordion shadow ms-2 mb-2 mt-0 p-0" id="accordion_folder_info">
      <div class="accordion-item">
        <h6 class="accordion-header">
          <button class="accordion-button" type="button" data-bs-toggle="collapse" data-bs-target="#collapseFolder" aria-expanded="true" aria-controls="collapseFolder">
            Описание сезона
          </button></h6>
      <div id="collapseFolder" class="accordion-collapse collapse show" data-bs-parent="#accordion_folder_info">
        <div class="accordion-body">

          <div class="row m-0">
            <div class="col col-2 p-0">
              <img src="/static/img/empty_poster.png" class="img-fluid rounded mx-1 my-2" style="height: 230px;">
            </div>
            <div class="col p-0">
              <div class="row m-0">
                <h5 class="p-1 m-0" title="{{ full_info.Progs_name }}">{{ full_info.Progs_name }}. {{ full_info.Adult_Name }}</h5>
              </div>

              <div class="row m-0">
                <div class="col col-5 p-0">
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="year_folder" style="height: 50px" disabled>{{ full_info.Progs_production_year }}</textarea>
                  <label for="year_folder">Год</label>
                </div>
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="country_folder" style="height: 50px" disabled>{{ full_info.Progs_production_country }}</textarea>
                  <label for="country_folder">Страна</label>
                </div>
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="director_folder" style="height: 50px" disabled>{{ full_info.Progs_Director }}</textarea>
                  <label for="director_folder">Режиссёр</label>
                </div>
              </div>
              <div class="col col-7 p-0">
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="roles_folder" style="height: 50px" disabled>{{ full_info.Progs_Cast }}</textarea>
                  <label for="roles_folder">В ролях</label>
                </div>
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="theme_folder" style="height: 50px" disabled>{{ full_info.Progs_comment }}</textarea>
                  <label for="theme_folder">Тематика</label>
                </div>
                <div class="form-floating mx-1 my-2">
                  <textarea class="form-control" id="keywords_folder" style="height: 50px" disabled>{{ full_info.Progs_keywords }}</textarea>
                  <label for="keywords_folder">Ключевые слова</label>
                </div>
              </div>
            </div>
            </div>
          </div>

          <div class="form-floating mx-1 my-2">
            <textarea class="form-control" id="short_descript_folder" style="height: 100px">{{ custom_fields.5 }}</textarea>
            <label for="short_descript_folder">Краткое описание</label>
          </div>
          <div class="form-floating mx-1 my-2">
            <textarea class="form-control" id="full_descript_folder" style="height: 150px">{{ full_info.Progs_annotation }}</textarea>
            <label for="full_descript_folder">Полное описание</label>
          </div>
        </div>
      </div>
      </div>


      <div class="accordion-item">
        <h6 class="accordion-header">
          <button class="accordion-button collapsed" type="button" data-bs-toggle="collapse" data-bs-target="#collapseEpisodes" aria-expanded="false" aria-controls="collapseEpisodes">
            Список всех серий
          </button></h6>
        <div id="collapseEpisodes" class="accordion-collapse collapse" data-bs-parent="#accordion_folder_info">
          <div class="accordion-body">
            {% include 'main/episodes_table.html' %}
          </div>
        </div>
      </div>
    </div>
  {% endif %}
</div>
<br>

{% endblock %}
</main>